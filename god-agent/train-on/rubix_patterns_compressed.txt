# RUBIX PATTERN KNOWLEDGE BASE v1.0
# FORMAT: compressed tokens, no NLP, pure lookup
# LEGEND: +=use, -=avoid, !=warning, *=detect, @=origin, &=related

==============================================================================
HISTORICAL_LINEAGE
==============================================================================
1977:Christopher_Alexander>A_Pattern_Language>253_architectural_patterns
1987:Ward_Cunningham+Kent_Beck>OOPSLA>first_software_patterns_paper
1990:OOPSLA>Gamma+Helm+Johnson+Vlissides>collaboration_begins
1994:GoF_Book>23_patterns>500k_copies>13_languages
1999:Hunt+Thomas>Pragmatic_Programmer>DRY_principle
1999:Fowler>Refactoring>code_smells_taxonomy
2002:Fowler>P_of_EAA>Repository+UnitOfWork+DataMapper
2004:Fowler>DI_term_coined
2006:Greg_Young>CQRS
2007:Nygard>Release_It>CircuitBreaker
2008:Uncle_Bob>Clean_Code

FOUNDERS
Alexander:pattern_language|QWAN
GoF:Gamma|Helm|Johnson|Vlissides
Uncle_Bob:SOLID|CleanCode|AgileManifesto
Fowler:Refactoring|P_of_EAA|DI
Kent_Beck:TDD|XP|JUnit
Liskov:LSP|CLU_language|data_abstraction
Knuth:TAOCP|TeX|algorithm_analysis
Brooks:Mythical_Man_Month|No_Silver_Bullet

==============================================================================
CREATIONAL_PATTERNS
==============================================================================
SINGLETON
@GoF1994
*private_ctor|static_instance|getInstance|Instance|shared|sharedInstance
*Lazy<T>|double_checked_lock|enum_singleton
+logging|config|connection_pool|device_driver
-hidden_deps|global_state|testing_difficulty|SRP_violation
!assumption_"only_one"_often_breaks_later

FACTORY_METHOD
@GoF1994|alias:Virtual_Constructor
*abstract_create_method|returns_interface|create*|make*|new*|factoryMethod
*subclass_decides_concrete_type
+OCP_compliance|product_family_variation
-simple_creation|no_variation_needed

ABSTRACT_FACTORY
@GoF1994|alias:Kit
*multiple_create_methods|family_interface|concrete_factory_per_family
*GUIFactory>createButton+createCheckbox
+product_family_consistency|platform_abstraction
-single_objects|frequent_new_product_types

BUILDER
@GoF1994|evolved:Bloch_Effective_Java
*separate_builder_class|method_chaining|with*|set*|build|fluent_interface
*private_ctor_accepts_builder|static_inner_class
+telescoping_ctor_fix|immutability|many_optional_params
-few_params|mutability_ok

PROTOTYPE
@GoF1994
*clone|copy|deepCopy|shallowCopy|duplicate|Cloneable|ICloneable
*copy_ctor|prototype_registry
+expensive_creation|runtime_unknown_class
-simple_ctor|circular_refs|non_copyable_resources

==============================================================================
STRUCTURAL_PATTERNS
==============================================================================
ADAPTER
@GoF1994|alias:Wrapper
*implements_target|holds_adaptee|*Adapter|*Wrapper
*method_translation|interface_conversion
+legacy_integration|third_party_libs|incompatible_interfaces
-modifiable_service|similar_interfaces
&diff_from_Decorator:changes_interface

BRIDGE
@GoF1994|alias:Handle/Body|impl:Pimpl
*two_hierarchies|abstraction_holds_impl_ref|runtime_swap
*composition_over_inheritance
+multi_dimension_variation|prevent_class_explosion
&diff_from_Adapter:designed_upfront_not_retrofit

COMPOSITE
@GoF1994|alias:Object_Tree
*component_interface|recursive_containment|add|remove|getChild
*leaf+composite_share_interface|tree_traversal
*Composite|Container|Group|Node
+file_systems|UI_hierarchy|org_charts|DOM|menus

DECORATOR
@GoF1994|alias:Wrapper|example:Java_IO_Streams
*same_interface|holds_wrapped|stackable|chainable
*Decorator|Wrapper|Buffered*|Logging*|Caching*
+runtime_behavior_add|alternative_to_subclass
&diff_from_Adapter:keeps_same_interface
&diff_from_Proxy:adds_behavior_not_access_control

FACADE
@GoF1994
*unified_interface|delegates_to_subsystem|simplifies_workflow
*Facade|Service|Manager|Gateway
+hide_complexity|reduce_coupling
&diff_from_Adapter:new_simpler_interface_not_compatibility

FLYWEIGHT
@GoF1994|example:text_editor_chars|String.intern|Integer.valueOf
*intrinsic_state:shared_immutable|extrinsic_state:passed_param
*factory_cache|Pool|Cache
+large_object_count|memory_optimization

PROXY
@GoF1994|alias:Surrogate
*same_interface|holds_real_subject|controls_access
*Proxy|Stub|Remote*|Virtual*|Lazy*
types:Virtual|Remote|Protection|Caching
+lazy_load|remote_comm|access_control|caching
&diff_from_Decorator:controls_access_not_adds_behavior

==============================================================================
BEHAVIORAL_PATTERNS
==============================================================================
CHAIN_OF_RESPONSIBILITY
@GoF1994|example:middleware|servlet_filters|DOM_events
*Handler|Middleware|Filter|Interceptor|Chain
*setNext|setSuccessor|handle|process
*next_handler_ref|recursive_delegation
+decouple_sender_receiver|eliminate_if_else_chains

COMMAND
@GoF1994|essence:OO_callback
*Command|Action|Task|Job|Transaction
*execute|undo|redo|rollback
*receiver_ref|param_storage|history_stack
+undo_redo|queue|log|transaction

ITERATOR
@GoF1994|fundamental:STL
*Iterator|Enumeration|Cursor|Iterable
*hasNext|next|first|reset|iterator|__iter__|__next__
*internal_position|collection_ref|often_inner_class
impl:java.util.Iterator|C++_STL|IEnumerable

MEDIATOR
@GoF1994|example:air_traffic_control
*Mediator|Controller|Hub|Coordinator|Dispatcher
*notify|register|send|broadcast
*colleagues_hold_mediator_ref|central_hub
+loose_coupling|centralized_communication

MEMENTO
@GoF1994
*Memento|Snapshot|Checkpoint|Backup|History
*createMemento|save|restore|saveState
*originator_creates|caretaker_stores|nested_class
+state_snapshot|undo|audit

OBSERVER
@GoF1994|alias:Pub_Sub|Event_Subscriber|fundamental:MVC
*Observer|Listener|Subscriber|Handler|Subject|Observable|Publisher|EventEmitter
*subscribe|attach|addObserver|notify|update|fire|emit
*subject_maintains_observer_list|push_vs_pull
impl:DOM_events|RxJS|.NET_events

STATE
@GoF1994|related:FSM
*State|Context|Mode|Phase|ConcreteState*
*handle|setState|transitionTo|changeState
*context_holds_current_state|state_initiates_transition
+eliminate_state_conditionals|behavior_varies_by_state
example:document_workflow|TCP_states|media_player

STRATEGY
@GoF1994|alias:Policy
*Strategy|Policy|Algorithm|Comparator|Validator
*execute|apply|calculate|setStrategy|setPolicy
*context_holds_strategy|passed_via_ctor_or_setter
+interchangeable_algorithms|runtime_selection
&similar_to_State:Strategy_bound_once|State_transitions
impl:java.util.Comparator|payment_processing

TEMPLATE_METHOD
@GoF1994|fundamental:framework_design
*Template|Abstract*|Base|Skeleton
*final_template_method|abstract_steps|hook_methods
*subclass_implements_steps|hook_has_default
+algorithm_skeleton|framework_extension_points
impl:InputStream.read|Servlet_doGet|JUnit|Android_Activity

VISITOR
@GoF1994|impl:double_dispatch
*Visitor|Element|Visitable|Acceptor
*accept(visitor)|visit*(element)
*visitor_has_visit_per_element_type
+operations_on_structure|new_ops_without_element_change
impl:compiler_AST|document_export

==============================================================================
MODERN_PATTERNS
==============================================================================
REPOSITORY
@Fowler_P_of_EAA_2002|origin:Hieatt+Mee
*Repository|IRepository<T>
*GetById|FindBy|FindAll|Add|Remove|Save
*collection_like_interface|query_concentration
+domain_data_abstraction|testability

UNIT_OF_WORK
@Fowler_P_of_EAA_2002
*IUnitOfWork|Commit|SaveChanges|BeginTransaction|Rollback
*tracks_changes|coordinates_writes|owns_repositories
impl:EF_DbContext|NHibernate_ISession

DEPENDENCY_INJECTION
@Fowler_2004_article
types:Constructor|Setter|Interface
*interface_deps_in_ctor|container_config|service_registration
*services.AddScoped<IService,Impl>
lifetimes:Transient|Scoped|Singleton
+loose_coupling|testability|IoC

CQRS
@Greg_Young_2006|based_on:Meyer_CQS
*separate_command_query_classes|separate_handlers
*CreateOrderCommand|GetOrderQuery|ICommandHandler|IQueryHandler
*separate_read_write_db|MediatR
!most_users_shouldnt_use|bounded_context_only
+independent_scaling|read_write_optimization

EVENT_SOURCING
@Fowler_2005
*event_store|Append|GetEvents|*Event|*Created|*Updated
*aggregate_rehydration|event_replay|snapshots
+audit_trail|temporal_queries|replay
&often_combined_with_CQRS

CIRCUIT_BREAKER
@Nygard_Release_It_2007|Fowler_2014
states:Closed>Open>HalfOpen
*CircuitState|failureThreshold|resetTimeout|failureCount
*wrapper_around_calls|state_machine
+cascade_failure_prevention|fail_fast
impl:Polly|Resilience4j|Hystrix

==============================================================================
ANTI_PATTERNS
==============================================================================
GOD_OBJECT
*thousands_LOC|many_unrelated_methods|high_coupling
*vague_names:Manager|Handler|Controller|Processor|Helper
*extensive_mocking_needed|few_devs_understand
!maintenance_nightmare|testing_difficulty
fix:Extract_Class|Facade|Strategy|Observer|DDD_bounded_contexts

SPAGHETTI_CODE
@Hopkins_1972
*high_cyclomatic_complexity|untraceable_flow|deep_nesting
*mixed_concerns|random_file_structure|goto_equivalent
!impossible_maintenance|constant_breakage
fix:structured_programming|separation_of_concerns

LAVA_FLOW
@AntiPatterns_1998
*commented_code|unused_vars_methods|TODO_remove_persists
*multiple_arch_approaches|archaeological_layers
*30-50%_code_understood_by_none
fix:static_analysis|SonarQube|pick_one_approach

GOLDEN_HAMMER
@Maslow_1966
*same_tech_all_cases|"database_is_architecture"
*solutions_before_problems|dismiss_alternatives
!suboptimal|performance_penalty|stagnation

COPY_PASTE
*high_duplication_metrics|functions_differ_one_line
*same_bugfix_multiple_locations
fix:Extract|DRY|Strategy|Template_Method

PRIMITIVE_OBSESSION
@Fowler_Refactoring_1999
*strings_for_phone_email_zip|magic_numbers|type_codes
*parallel_arrays|scattered_validation
fix:Value_Objects|enums|Replace_Type_Code

FEATURE_ENVY
@Fowler_Refactoring_1999
*method_uses_other_class_data|many_getters_called
*calculations_on_external_data
fix:Move_Method|Tell_Dont_Ask

BIG_BALL_OF_MUD
@Foote+Yoder_PLoP_1997
*no_discernible_architecture|everything_depends_everything
*promiscuous_info_sharing|only_swamp_guides_navigate
*impossible_arch_diagrams
!tech_debt_acceleration|talent_drain
fix:SOLID|Boy_Scout_Rule|Clean_Architecture|DDD

LASAGNA_ARCHITECTURE
@pasta_theory_metaphor
*simple_CRUD_touches_5+_layers|pass_through_layers
*factory_for_one_class|interface_single_impl
!complexity_without_value|performance_degradation
fix:flexible_layering|YAGNI|vertical_slices

CARGO_CULT
@Jargon_File_1991|Feynman
*patterns_where_not_needed|works_but_unknown_why
*trial_error_debug|SO_code_with_unused_vars
!code_bloat|hidden_bugs|false_confidence
fix:seek_understanding|code_review|document_rationale

PREMATURE_OPTIMIZATION
@Knuth_1974:"root_of_all_evil"
!context:97%_forget_small_efficiencies|3%_critical_optimize
*caching_without_measurement|complex_unproven_optimizations
*readability_sacrifice|micro_optimize_cold_path
when_ok:after_profiling|algorithmic_BigO|known_patterns_N+1
fix:make_work>make_right>make_fast|profile_first|80_20

NOT_INVENTED_HERE
@Katz+Allen_1982
*custom_logging_orm_auth_duplicating_mature
*blanket_anti_opensource|"build_for_control"_default
when_build_ok:core_competitive_advantage|no_adequate_external|validated_scale
fix:calculate_true_cost|rational_build_vs_buy

==============================================================================
PRINCIPLES
==============================================================================
SOLID
S:Single_Responsibility|one_reason_to_change|*changes_for_multiple_reasons
O:Open_Closed|open_extension_closed_modification|*cascading_changes|scattered_switch
L:Liskov_Substitution|subtypes_substitutable|*UnsupportedOperationException|type_checking
I:Interface_Segregation|no_unused_deps|*fat_interfaces|empty_stubs
D:Dependency_Inversion|depend_on_abstractions|*business_imports_db_ui_framework

DRY
@Hunt+Thomas_1999
def:single_authoritative_representation_of_knowledge
!about_knowledge_not_code|similar_code_different_concepts_ok
&AHA:Avoid_Hasty_Abstractions

KISS
@Kelly_Johnson_Lockheed_WWII
def:simple_systems_work_best|straightforward_over_clever
!stupid=maintenance_sophistication_available
&tension_with_OCP_DIP

YAGNI
@XP|Kent_Beck+Chet_Hendrickson_C3
def:no_functionality_until_needed|no_presumptive_features
!depends_on:continuous_refactoring|automated_testing
Fowler:if_no_complexity_increase>no_YAGNI_needed

LAW_OF_DEMETER
@Ian_Holland_1987_Demeter_Project
def:only_talk_to_immediate_friends|one_dot_rule
allowed:self|params|created_objects|direct_components|globals
violation:a.getB().getC().doSomething()=train_wreck
!exception:DTOs|value_objects|data_structures

COMPOSITION_OVER_INHERITANCE
@GoF_1994
inheritance=white_box_reuse|compile_time|internals_visible
composition=black_box_reuse|runtime_flexible|internals_hidden
prefer_composition:runtime_variation|no_true_is_a|avoid_fragile_base_class
inheritance_ok:stable_is_a|shared_impl_belongs|Template_Method

==============================================================================
DETECTION_QUICK_REF
==============================================================================
PATTERN          | SIGNATURES                      | METHODS
-----------------|--------------------------------|---------------------------
Singleton        | private_ctor,static_instance   | getInstance,shared
Factory_Method   | abstract_create,returns_iface  | create*,make*,factoryMethod
Abstract_Factory | multi_create_per_family        | createButton,createCheckbox
Builder          | fluent_chain,separate_class    | with*,build
Adapter          | impl_target,holds_adaptee      | delegates_translate
Decorator        | same_iface,stackable           | delegates_adds_behavior
Observer         | subject_observer_list          | attach,notify,update
Strategy         | algo_objects,context_holds     | execute,setStrategy
Command          | request_objects                | execute,undo
State            | context_delegates_state        | handle,setState
Repository       | collection_interface           | GetById,Save,FindBy
Circuit_Breaker  | state_machine_wrapper          | Closed>Open>HalfOpen

SMELL            | DETECTION
-----------------|------------------------------------------
God_Object       | 1000+LOC,*Manager,high_coupling,few_understand
Spaghetti        | high_cyclomatic,untraceable,deep_nest
Lava_Flow        | commented_code,unused,TODO_remove
Feature_Envy     | many_external_getters,calc_on_other_data
Primitive_Obsess | string_phone_email,magic_numbers,type_codes
Big_Ball_Mud     | no_boundaries,all_deps_all,no_arch_diagram

==============================================================================
SOURCES
==============================================================================
refactoring.guru|patterns+visuals
sourcemaking.com|patterns+antipatterns
martinfowler.com|enterprise+CQRS+DI
blog.cleancoder.com|SOLID
laputan.org/mud|Big_Ball_of_Mud_original
GoF_1994|Design_Patterns_Elements_Reusable_OO_Software
Fowler_2002|Patterns_Enterprise_Application_Architecture
Hunt+Thomas_1999|Pragmatic_Programmer
Nygard_2007|Release_It
